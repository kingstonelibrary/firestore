<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome to Firebase Hosting</title>

    <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase-firestore.js"></script>

    <style media="screen">    </style>
  </head>
  <body>
    <div id="message">
      <h2>Cloud Firestoreテスト</h2>
      <h3>コンソール確認</h3>
      <h4>プロジェクト：　FireBasePush</h4>
      <h4><a href="https://firebase.google.com/docs/firestore/quickstart?authuser=0">チュートリアル</a></h4>
      <hr>
      Firebase の初期化を<font color="red">scriptタグタイプ</font>でやってるので外部サイトのSSLでOK
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        firebase.initializeApp({
          apiKey: 'AIzaSyAmWtMB4M-OLI41PIEsg_thu8cBZD7aWm8 ',
          authDomain: 'fir-push-44665.firebaseapp.com',
          projectId: 'fir-push-44665'
        });

        var db = firebase.firestore();

        // データ追加
        // db.collection("users").add({
        //     first: "Ada",
        //     last: "Lovelace",
        //     born: 1815
        // })
        // .then(function(docRef) {
        //     console.log("Document written with ID: ", docRef.id);
        // })
        // .catch(function(error) {
        //     console.error("Error adding document: ", error);
        // });

        // データ読出
        db.collection("users").get().then((querySnapshot) => {
            querySnapshot.forEach((doc) => {
                console.log(`${doc.id} => first: ${doc.data().first} last: ${doc.data().last} born: ${doc.data().born}`);
            });
        });
      });
    </script>
  </body>
</html>
